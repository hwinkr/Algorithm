```python
import sys

input = sys.stdin.readline
sys.setrecursionlimit(10**6)


def solution(left: int, right: int, weight: int) -> int:
    if left > right:
        return 0

    if dp[left][right]:
        return dp[left][right]

    dp[left][right] = max(
        table[left] * weight + solution(left + 1, right, weight + 1),
        table[right] * weight + solution(left, right - 1, weight + 1),
    )
    return dp[left][right]


if __name__ == "__main__":
    n = int(input())
    dp = [[0] * n for _ in range(n)]
    table = []
    for _ in range(n):
        table.append(int(input()))
    print(solution(0, n - 1, 1))
```

### âœ… íˆ¬í¬ì¸í„° ë°©ë²•ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ì—†ëŠ” ì´ìœ 

ë°°ì—´ì˜ ì–‘ ëê°’ì„ ë¹„êµí•˜ë©´ì„œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ìµœëŒ€ ê°€ì¹˜ë¥¼ êµ¬í•´ì•¼ í•˜ë¯€ë¡œ, `íˆ¬í¬ì¸í„°` ë¡œ í•´ê²°í•˜ë ¤ê³  í–ˆìŠµë‹ˆë‹¤.  
í•˜ì§€ë§Œ, íˆ¬í¬ì¸í„° ë°©ì‹ì€ í˜„ì¬ ë°­ì˜ ì–‘ ëì— ìˆëŠ” ë²¼ì˜ ê°€ì¹˜ê°€ ê°™ì€ ê²½ìš°ì— ëŒ€í•´ì„œ 100% ì •ë‹µì„ í™•ì‹ í•  ìˆ˜ ì—†ëŠ” ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤.

**ì˜ˆì‹œ)**

- [2, 2, 1, 2]

```python
if table[end] < table[start]:
    # ...
else:
    # ...
```

ì´ ë°©ì‹ìœ¼ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´, 17ì„ ì¶œë ¥í•˜ì§€ë§Œ ì •ë‹µì€ 18ì´ ë©ë‹ˆë‹¤.  
ë°˜ëŒ€ì˜ ê²½ìš°ë„ ë§ˆì°¬ê°€ì§€ ì…ë‹ˆë‹¤.

- [2, 1, 2, 2]

```python
if table[start] < table[end]:
    # ...
else:
    # ...
```

ì–‘ ëê°’ì´ ê°™ì€ ê²½ìš°ì— ëŒ€í•œ ë¶„ê¸°ë¥¼ ë‚˜ëˆ„ê³  íˆ¬í¬ì¸í„° ë°©ì‹ì„ ìœ ì§€í•˜ë©´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ ë¼ëŠ” ìƒê°ë„ í–ˆì§€ë§Œ ê³„ì†í•´ì„œ ê°™ì€ ê°’ì´ ë‚˜ì˜¨ë‹¤ë©´ ì½”ë“œê°€ ë” ë³µì¡í•´ì§€ê³  ë¹„íš¨ìœ¨ì ì´ê²Œ ë©ë‹ˆë‹¤.

### ğŸ“Œ í’€ì´

ì´ ë¬¸ì œëŠ” ë‹¤ì´ë‚˜ë¯¹ í”„ë¡œê·¸ë˜ë°ì„ ì‚¬ìš©í•´ì„œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```python
answer = max(1ë²ˆì§¸ ë²¼ë¥¼ ìˆ˜í™•í–ˆì„ ë•Œ ê°€ì¹˜ + [2, N] ì˜ ë°­ì—ì„œ ë²¼ë¥¼ ìˆ˜í™•í–ˆì„ë•Œì˜ ê°€ì¹˜,
             Në²ˆì§¸ ë²¼ë¥¼ ìˆ˜í™•í–ˆì„ ë•Œ ê°€ì¹˜ + [1, N - 1] ì˜ ë°­ì—ì„œ ë²¼ë¥¼ ìˆ˜í™•í–ˆì„ë•Œì˜ ê°€ì¹˜)
```

ì´ì œ ì—¬ê¸°ì„œ, [2, N] ê³¼ [1, N - 1] ì˜ ë°­ì—ì„œ ë²¼ë¥¼ ìˆ˜í™•í–ˆì„ë•Œì´ ê°€ì¹˜ë¥¼ êµ¬í•˜ë ¤ë©´ ë‹¤ì‹œ ë°­ì„ ìŠ¬ë¼ì´ì‹± í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.

```python
[2, N] = max(2ë²ˆì§¸ ë²¼ë¥¼ ìˆ˜í™•í–ˆì„ ë•Œ ê°€ì¹˜ + [3, N] ì˜ ë°­ì—ì„œ ë²¼ë¥¼ ìˆ˜í™•í–ˆì„ë•Œì˜ ê°€ì¹˜,
             N - 1ë²ˆì§¸ ë²¼ë¥¼ ìˆ˜í™•í–ˆì„ ë•Œ ê°€ì¹˜ + [1, N - 2] ì˜ ë°­ì—ì„œ ë²¼ë¥¼ ìˆ˜í™•í–ˆì„ë•Œì˜ ê°€ì¹˜)

[1, N - 1] = max(1ë²ˆì§¸ ë²¼ë¥¼ ìˆ˜í™•í–ˆì„ ë•Œ ê°€ì¹˜ + [2, N - 1] ì˜ ë°­ì—ì„œ ë²¼ë¥¼ ìˆ˜í™•í–ˆì„ë•Œì˜ ê°€ì¹˜,
             N - 2ë²ˆì§¸ ë²¼ë¥¼ ìˆ˜í™•í–ˆì„ ë•Œ ê°€ì¹˜ + [1, N - 3] ì˜ ë°­ì—ì„œ ë²¼ë¥¼ ìˆ˜í™•í–ˆì„ë•Œì˜ ê°€ì¹˜)
```

[3, N], [1, N - 2], [2, N - 1], [1, N - 3] ì˜ ë°­ì—ì„œ ë²¼ë¥¼ ìˆ˜í™•í–ˆì„ë•Œì˜ ê°€ì¹˜ë¥¼ êµ¬í•˜ê¸° ìœ„í•´ì„œ ë°­ì„ ìŠ¬ë¼ì´ì‹± í•´ì£¼ëŠ” ê³¼ì •ì„ ê³„ì†í•´ì„œ ë°˜ë³µí•´ì•¼ í•©ë‹ˆë‹¤.

ì¼ë°˜í™”ë¥¼ í•´ë³´ë©´, ì „ì²´ ê¸¸ì´ì˜ ë°­ì—ì„œ ë²¼ì˜ ê°€ì¹˜ì˜ ìµœëŒ“ê°’ì„ êµ¬í•˜ê¸° ìœ„í•´ì„œëŠ” ì™¼ìª½ê³¼ ì˜¤ë¥¸ìª½ì˜ ë²¼ë¥¼ ìˆ˜í™•í•˜ê³  ë‚˜ë¨¸ì§€ ë°­ì—ì„œ ì–»ì„ ìˆ˜ ìˆëŠ” ë²¼ì˜ ê°€ì¹˜ì˜ ìµœëŒ“ê°’ì„ êµ¬í•´ì•¼ í•˜ëŠ” ë¬¸ì œ ì…ë‹ˆë‹¤.  
ì¦‰, ì „ì²´ ê¸¸ì´ì˜ ë‹µì„ êµ¬í•˜ê¸° ìœ„í•´ì„œ ì „ì²´ ë³´ë‹¤ ì‘ì€ ê¸¸ì´ì˜ ë‹µì„ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” DP ë¬¸ì œë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ì¤‘ìš”í•œ ê²ƒì€, ì „ì²´ ê¸¸ì´ì˜ ë‹µì„ êµ¬í•˜ê¸° ì´ì „ì— **ì‘ì€ ê¸¸ì´ì˜ ë‹µë“¤ì´ ì´ë¯¸ ëª¨ë‘ êµ¬í•´ì ¸ ìˆì–´ì•¼ í•œë‹¤ëŠ” ê²ƒ** ì…ë‹ˆë‹¤.

```python
dp[left][right] = max(
        table[left] * weight + solution(left + 1, right, weight + 1),
        table[right] * weight + solution(left, right - 1, weight + 1),
    )
```

ìœ„ì™€ ê°™ì€ ì í™”ì‹ì„ ì‚¬ìš©í•´ì„œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
